<!DOCTYPE html>
<html lang="en"><head><title>CodePull - An internal tool to democratize feature testing at Drop</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="George Jose"/><meta property="og:title" content="CodePull - An internal tool to democratize feature testing at Drop"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="CodePull - An internal tool to democratize feature testing at Drop"/><meta name="twitter:description" content="post react-native typescript developer-experience Note This is a shorter version of a more detailed post I made internally at Drop. Some details have been omitted here to preserve confidentiality."/><meta property="og:description" content="post react-native typescript developer-experience Note This is a shorter version of a more detailed post I made internally at Drop. Some details have been omitted here to preserve confidentiality."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="post react-native typescript developer-experience Note This is a shorter version of a more detailed post I made internally at Drop. Some details have been omitted here to preserve confidentiality."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:url" content="https://georgejose.com/static/og-image.png"/><meta name="twitter:image" content="https://georgejose.com/static/og-image.png"/><meta property="og:image" content="https://georgejose.com/static/og-image.png"/><meta property="twitter:domain" content="georgejose.com"/><meta property="og:url" content="https://georgejose.com/Blog/CodePull---An-internal-tool-to-democratize-feature-testing-at-Drop"/><meta property="twitter:url" content="https://georgejose.com/Blog/CodePull---An-internal-tool-to-democratize-feature-testing-at-Drop"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="post react-native typescript developer-experience Note This is a shorter version of a more detailed post I made internally at Drop. Some details have been omitted here to preserve confidentiality."/><meta name="generator" content="Quartz"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Blog/CodePull---An-internal-tool-to-democratize-feature-testing-at-Drop"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="..">George Jose</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../Blog/">Blog</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>CodePull - An internal tool to democratize feature testing at Drop</a></div></nav><h1 class="article-title">CodePull - An internal tool to democratize feature testing at Drop</h1><p show-comma="true" class="content-meta"><time datetime="2021-05-25T00:00:00.000Z">May 24, 2021</time><span>5 min read</span></p><ul class="tags"><li><a href="../tags/blog/post" class="internal tag-link">blog/post</a></li><li><a href="../tags/react-native" class="internal tag-link">react-native</a></li><li><a href="../tags/typescript" class="internal tag-link">typescript</a></li><li><a href="../tags/developer-experience" class="internal tag-link">developer-experience</a></li></ul></div></div><article class="popover-hint"><p><a href="../tags/blog/post" class="tag-link internal alias" data-slug="tags/blog/post">post</a> <a href="../tags/react-native" class="tag-link internal alias" data-slug="tags/react-native">react-native</a> <a href="../tags/typescript" class="tag-link internal alias" data-slug="tags/typescript">typescript</a> <a href="../tags/developer-experience" class="tag-link internal alias" data-slug="tags/developer-experience">developer-experience</a></p>
<blockquote class="callout note" data-callout="note">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>Note</p></div>
                  
                </div>
<div class="callout-content">
<p>This is a shorter version of a more detailed post I made internally at Drop. Some details have been omitted here to preserve confidentiality.
After its initial adoption in June 2021, CodePull became a core part of the development and testing workflow at Drop.</p>
</div>
</blockquote>
<h1 id="background">Background<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#background" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>React native is used at Drop to power the consumer app. React Native allows code to be written in Typescript, which under the hood calls platform specific APIs, resulting in the same codebase powering a fully native experience on Android &amp; iOS.</p>
<p>At a very high level, the overall development process followed currently looks something like this:</p>
<ul>
<li>Engineer writes code for a new feature on a branch, based on specs &amp; designs aligned on as a cross functional team (engineering, design, product, data and other relevant functions for the feature in question)</li>
<li>Once ready, the engineer creates a Pull Request to be reviewed by their peers.
<ul>
<li>Up until now, the engineer can really only see the changes they’re making on a simulator, or on a test devices they have.</li>
<li>To get more people involved in testing their work up to this point, there 2 ways, broadly speaking:
<ul>
<li>The engineer can set up a zoom call with relevant folks (usually design at this point) to walk them through their work via screen sharing</li>
<li>Alternatively, the engineer could create a new test build and distribute it internally using TestFlight</li>
</ul>
</li>
</ul>
</li>
<li>Once the code is reviewed and approved by at least 2 other members of the engineering team, the PR is ready to be merged into a release branch</li>
<li>Once the code is merged, an automated tool picks it up and pushes the changes to a QA build. From this point, the changes made are widely accessible to cross functional folks, as long as they have access to the QA track.</li>
</ul>
<h1 id="the-problem">The Problem<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-problem" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>Looking at the process above, it becomes apparent that there are a few bottlenecks that can be improved on, particularly in sharing work in progress with cross functional members of the team in a scalable way. In particular:</p>
<blockquote>
<p>The engineer can set up a zoom call with relevant folks (usually design at this point) to walk them through their work</p>
</blockquote>
<p>This does not scale very well, because:</p>
<ul>
<li>It is a synchronous process and requires finding a time that works for everyone</li>
<li>Since the flow is being walked through on a simulator on the engineer’s computer and screen shared, it’s harder to spot small visual issues</li>
<li>It’s simply not the same as trying out a flow on one’s device and evaluating how it ‘feels’</li>
</ul>
<blockquote>
<p>Alternatively, the engineer could create a new test build and distribute it internally using TestFlight</p>
</blockquote>
<p>This also does not scale very well because:</p>
<ul>
<li>We have CI automation in place to automatically push any merged code into QA builds. Manually pushing any other code will get overwritten the next time another engineer’s code is merged</li>
<li>It only allows testing one thing at a time. Another engineer trying to do the same will cause their peer’s test deployment to be overwritten</li>
</ul>
<blockquote>
<p>Once the code is merged, an automated tool picks it up and pushes the changes to the QA builds. From this point, the changes made are widely accessible to cross functional folks, as long as they have access to the QA app</p>
</blockquote>
<p>Testing at this phase is insufficient, as it can block continuous delivery. Any code merged into a release branch is expected to be free of bugs and ready for release so as to not block other engineers shipping their work.</p>
<p>With this in mind, it becomes clear that there is an opportunity to improve tooling to allow sharing work in progress. The ideal solution here would:</p>
<ol>
<li>Make it quick and easy for an engineer to share their work in progress, without having to merge code into a release branch. There shouldn’t be any additional manual work in doing this.</li>
<li>Make it quick and easy for the person who wants to test out the work in progress to do so. They should ideally not have to keep track of build numbers, manually update builds etc. The easier the process, the more likely it will be used frequently.</li>
<li>Any process adopted here should not have any performance or security implications.</li>
</ol>
<h1 id="the-solution">The solution<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-solution" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>It turns out that we can actually build something to solve this problem. Keeping in mind that the vast majority of our code is written in typescript, with native code changes happening very infrequently, we could solve the above problems by simply making it possible for the app to ‘pull’ compiled typescript code on demand.</p>
<p>This isn’t very different to how <a href="https://microsoft.github.io/code-push/" class="external">CodePush<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> works (where we’re able to push production updates to users without going through the App / Play Store).</p>
<p>We’re calling this new system CodePull, and this is how it works:</p>
<ul>
<li>An engineer commits code and pushes it to GitHub on their own feature branch</li>
<li>A GitHub action is kicked off in response. The action compiles all the typescript code from the commit.</li>
<li>It then pushes the compiled code into an s3 bucket with a special file name based on the git branch</li>
<li>The app now has the ability to open special links created based on git branch name (eg: drop://codepull?name=feature-improved-search.zip. The engineer shares the link with anyone on the project team who wants to test.</li>
<li>Opening the link causes the app to download the relevant WIP compiled code from the s3 bucket and restart itself, running the new code</li>
<li>Once done, the individual testing the feature can revert back to the regular app code</li>
</ul>
<h2 id="limitations">Limitations<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#limitations" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>While this should cover us for the majority of code we want to test, there will occasionally be times when we make native changes, where we’ll have to create custom test builds</li>
</ul></article><hr/><div class="page-footer"><div class="giscus" data-repo="G2Jose/personal_website" data-repo-id="MDEwOlJlcG9zaXRvcnk0MjU4OTcxOQ==" data-category="Announcements" data-category-id="DIC_kwDOAoneF84Cn__T" data-mapping="url" data-strict="1" data-reactions-enabled="1" data-input-position="bottom" data-light-theme="light" data-dark-theme="dark" data-theme-url="https://georgejose.com/static/giscus"></div></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class aria-controls="toc-content" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content" class><ul class="overflow"><li class="depth-0"><a href="#background" data-for="background">Background</a></li><li class="depth-0"><a href="#the-problem" data-for="the-problem">The Problem</a></li><li class="depth-0"><a href="#the-solution" data-for="the-solution">The solution</a></li><li class="depth-1"><a href="#limitations" data-for="limitations">Limitations</a></li></ul></div></div></div><footer class><p><a href="https://georgejose.com">George Jose</a> © 2025</p><ul><li><a href="https://github.com/g2jose">GitHub</a></li><li><a href="https://x.com/george__jose">X</a></li><li><a href="https://www.linkedin.com/in/g2jose/">LinkedIn</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="../postscript.js" type="module"></script></html>